{"version":3,"file":"pending-offer-list.js","sourceRoot":"","sources":["../../src/elements/pending-offer-list.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, property, css } from 'lit-element';\n\nimport { List } from 'scoped-material-components/mwc-list';\nimport { ListItem } from 'scoped-material-components/mwc-list-item';\nimport { CircularProgress } from 'scoped-material-components/mwc-circular-progress';\n\nimport { Offer } from '../types';\nimport { sharedStyles } from './utils/shared-styles';\nimport { StoreElement } from '@holochain-open-dev/common';\nimport { HoloHashed } from '@holochain-open-dev/core-types';\nimport { Icon } from 'scoped-material-components/mwc-icon';\nimport { TransactorStore } from '../transactor.store';\n\nexport abstract class PendingOfferList extends StoreElement<TransactorStore> {\n  /** Public attributes */\n\n  /** Private properties */\n\n  @property({ type: String })\n  _lastSelectedOfferHash: string | undefined = undefined;\n\n  @property({ type: String })\n  _loading = true;\n\n  static styles = [\n    sharedStyles,\n    css`\n      :host {\n        display: flex;\n      }\n    `,\n  ];\n\n  async firstUpdated() {\n    await this.store.fetchMyPendingOffers();\n    this._loading = false;\n  }\n\n  renderPlaceholder(type: string) {\n    return html`\n      <div class=\"column center-content\" style=\"flex: 1\">\n        <span style=\"padding-top: 34px;\" class=\"placeholder padding\">\n          You have no ${type.toLowerCase()} offers\n        </span>\n      </div>\n    `;\n  }\n\n  offerSelected(offerHash: string) {\n    this.dispatchEvent(\n      new CustomEvent('offer-selected', {\n        detail: { offerHash, composed: true, bubbles: true },\n      })\n    );\n    this._lastSelectedOfferHash = offerHash;\n  }\n\n  renderOfferList(title: string, offers: Array<HoloHashed<Offer>>) {\n    return html`<div class=\"column\">\n      <span class=\"title\">${title} offers</span>\n\n      ${offers.length === 0\n        ? this.renderPlaceholder(title)\n        : html`\n            <mwc-list>\n              ${offers.map(\n                (offer, index) => html`\n                  <mwc-list-item\n                    @click=${() => this.offerSelected(offer.hash)}\n                    graphic=\"avatar\"\n                    .activated=${this._lastSelectedOfferHash\n                      ? this._lastSelectedOfferHash === offer.hash\n                      : false}\n                  >\n                    <span>\n                      ${offer.content.amount} credits\n                      ${this.store.isOutgoing(offer.content) ? 'to' : 'from'}\n                      ${this.store.counterpartyNickname(offer.content)}\n                    </span>\n\n                    <mwc-icon\n                      slot=\"graphic\"\n                      .style=\"color: ${this.store.isOutgoing(offer.content)\n                        ? 'red'\n                        : 'green'}\"\n                      >${this.store.isOutgoing(offer.content)\n                        ? 'call_made'\n                        : 'call_received'}</mwc-icon\n                    >\n                  </mwc-list-item>\n                  ${index < offers.length - 1\n                    ? html`<li divider padded role=\"separator\"></li> `\n                    : html``}\n                `\n              )}\n            </mwc-list>\n          `}\n    </div>`;\n  }\n\n  render() {\n    if (this._loading)\n      return html`<div class=\"column fill center-content\">\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n        <span class=\"placeholder\" style=\"margin-top: 18px;\"\n          >Fetching pending offers...</span\n        >\n      </div>`;\n\n    return html`<div class=\"column fill\">\n      <div style=\"margin-bottom: 24px;\">\n        ${this.renderOfferList('Incoming', this.store.incomingOffers)}\n      </div>\n      ${this.renderOfferList('Outgoing', this.store.outgoingOffers)}\n    </div>`;\n  }\n\n  getScopedElements() {\n    return {\n      'mwc-circular-progress': CircularProgress,\n      'mwc-list': List,\n      'mwc-list-item': ListItem,\n      'mwc-icon': Icon,\n    };\n  }\n}\n"]}